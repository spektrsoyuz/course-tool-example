function Button(e,n,t,o){void 0===o&&(o="");var i=$("<span class='primaryButton2 "+o+"' id='"+e+"'><span class='primaryButtonComponent primaryButtonLeft"+o+"'></span><span class='primaryButtonComponent primaryButtonMiddle"+o+"' id='"+e+"Text'>"+ResourceManager.getString(n)+"</span><span class='primaryButtonComponent primaryButtonRight"+o+"'></span></span>");return"function"==typeof t&&i.click(t),i.hover(function(){$(this).find(".primaryButtonLeft").addClass("primaryButtonLeftHover"),$(this).find(".primaryButtonMiddle").addClass("primaryButtonMiddleHover"),$(this).find(".primaryButtonRight").addClass("primaryButtonRightHover")}).mouseleave(function(){$(this).find(".primaryButtonLeft").removeClass("primaryButtonLeftHover"),$(this).find(".primaryButtonMiddle").removeClass("primaryButtonMiddleHover"),$(this).find(".primaryButtonRight").removeClass("primaryButtonRightHover")}),EventDispatcher.addEventListener(Localization.events.localeChange,function(){i.find(".primaryButtonMiddle").text(ResourceManager.getString(n))}),i}function ModalWindow(e,n,t,o){var i=$("<div class='modalContainer'><div class='modalWindowModal'></div><div class='modalWindow' id='"+e+"'><div class='modalWindowTop"+t+"'><span class='modalWindowIcon "+t+"'></span><span class='modalWindowTitle "+t+"'>"+ResourceManager.getString(n)+"</span><span class='modalCloseIcon"+t+"'></span></div><div class='modalWindowMiddle"+t+"'><div class='modalWindowContent "+t+"'></div></div><div class='modalWindowBottom"+t+"'><div class='buttonBar modalButtonBar"+t+"'></div></div></div></div>");return"function"==typeof o&&i.find(".modalCloseIcon").bind("click",o),EventDispatcher.addEventListener(Localization.events.localeChange,function(){i.find(".modalWindowTitle").text(ResourceManager.getString(n))}),i}var ModalWindowFactory={currentModal:null,show:function(e,n,t,o,i,r,a){var s=ModalWindow(e,n,t,a);s.find(".modalWindowContent").append(o);for(var l=0;l<r.length;l++)s.find(".buttonBar").append(r[l]);$("body").append(s),s.find(".modalWindowModal").animate({opacity:.25,height:"100%",width:"100%"},1e3),s.find(".modalWindow").fadeIn();var c=window.innerHeight/2,d=window.innerWidth/2,u=s.find(".modalWindow").height()/2,p=s.find(".modalWindow").width()/2;0!=u&&0<=c-u&&s.find(".modalWindow").css("top",c-u),0!=p&&0<=d-p&&s.find(".modalWindow").css("left",d-p),ModalWindowFactory.currentModal=s},close:function(){ModalWindowFactory.currentModal&&(ModalWindowFactory.currentModal.find(".modalWindow").fadeOut(),ModalWindowFactory.currentModal.find(".modalWindowModal").animate({opacity:0,height:"100%",width:"100%"},1e3,function(){ModalWindowFactory.currentModal&&(ModalWindowFactory.currentModal.remove(),ModalWindowFactory.currentModal=null)}))}};function Header(){return $("<div id='header'><div id='areas'></div><div id='browseMenuContainer'><span class='bottomDropShadow'></span></div></div>")}function InstitutionalBranding(){return $("<span class='institutionalBranding'></span>")}function SearchBox(){var e=$("<div id='searchBox'><span class='searchInputContainer'><input id='searchInput' type='text'/></span><span id='searchButton'></span></div>");return e.find("#searchInput").focus(function(){$(this).val()==ResourceManager.getString("search_title")&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val(ResourceManager.getString("search_title"))}),EventDispatcher.addEventListener(Localization.events.localeChange,function(){e.find("#searchInput").val(ResourceManager.getString("search_title"))}),e}function addNavigationControls(){$("#areas").append("<div id='browseButton' class='browseButton'><div><div><a id='browseArrow' class='browseButtonDownArrow' href='javascript:void(0)'></a></div></div></div>"),$("#browseMenuContainer").prepend("<div id='browseMenu'><div id='scrollableListContainer'></div></div><span id='browseButtonBottom' class='browseButton'></span>"),$("#browseButton, #browseButtonBottom").bind("click",toggleBrowseMenu),$(".browseButton").hover(function(){$("#browseButton").hasClass("browseTab")||($("#browseButton").css("background-position","0px -205px"),$("#browseButton div").css("background-position","0 -123px"),$("#browseButton div div").css("background-position","right -164px"))}).mouseleave(function(){$("#browseButton").hasClass("browseTab")||($("#browseButton").css("background-position","0px -82px"),$("#browseButton div").css("background-position","0 0px"),$("#browseButton div div").css("background-position","right -41px"))}),EventDispatcher.addEventListener(Localization.events.localeChange,function(){$("#browseButton div div a").text(ResourceManager.getString("areas_label_browse"))})}function toggleBrowseMenu(){return $("#browseMenu").is(":hidden")?($("#browseButton").removeClass("browseButton"),$("#browseButton").addClass("browseTab"),$("#browseButton").css("background-position","top left"),$("#browseButton div").css("background-position","top right"),$("#browseButton div div").css("background-position","top left"),$("#browseArrow").removeClass("browseButtonDownArrow"),$("#browseArrow").addClass("upArrow"),$("#browseMenu").slideDown("normal",function(){$("body").click(function(){$("#browseMenu").hasClass("over")||($("body").unbind("click"),toggleBrowseMenu())})}),ScrollableList.slideDownScrollButtons(),$("#browseMenu").bind("mouseenter",function(){$(this).addClass("over")}),$("#browseMenu").bind("mouseleave",function(){$(this).removeClass("over")})):($("#browseButton").removeClass("browseTab"),$("#browseButton").addClass("browseButton"),$("#browseButton").css("background-position","0px -82px"),$("#browseButton div").css("background-position","0 0px"),$("#browseButton div div").css("background-position","right -41px"),$("#browseArrow").removeClass("upArrow"),$("#browseArrow").addClass("browseButtonDownArrow"),$("#browseMenu").slideUp(),ScrollableList.slideUpScrollButtons(),$("body").unbind("click")),!1}function BrowseMenu(){return $("<div id='browseMenuContainer'><div id='browseMenu'><div id='scrollableListContainer'></div></div><span id='browseButtonBottom' class='browseButton'></span><span class='bottomDropShadow'></span></div>")}function UserControls(){var e=$("<div id='globalNav'><div><ul><li><a class='signOutText pointer'>"+ResourceManager.getString("userdetails_signout")+"</a></li><li><a class='helpText pointer'>"+ResourceManager.getString("userdetails_help")+"</a></li></ul></div></div>");return e.find(".signOutText").click(function(){$($(".signOutText")[0]).hasClass("proxyAccess")||(CommonContext.user=null,CookieManager.remove("username"),CommonContext.standalone?"function"==typeof Messenger.messageHandler&&($(this).hasClass("signIn")?Messenger.messageHandler(createRequestMessage("signin")):Messenger.messageHandler(createRequestMessage("signout"))):window.location="login.html")}),e.find(".preferenceText").bind("click",Preferences.show),EventDispatcher.addEventListener(Localization.events.localeChange,function(){CommonContext.user?(e.find(".signOutText").text(ResourceManager.getString("userdetails_signout")),e.find(".signOutText").addClass("signOut")):(e.find(".signOutText").text(ResourceManager.getString("userdetails_signin")),e.find(".signOutText").addClass("signIn")),e.find(".preferenceText").text(ResourceManager.getString("preferences_label")),e.find(".helpText").text(ResourceManager.getString("userdetails_help"))}),e}function FooterApplicationValueObject(e,n,t){this.appid=e,this.className=n,this.displayUI=t}function footerAppDiv(e,n,t){this.index=e,this.appId=n,this.html=t}var Footer={apps:[],uiMarker:"-ui",appContainers:[],displayUI:"<div id='outerFooter'><div id='footer'><div id='footerApplicationBar'><ul id='footerIconContainer'></ul><span class='footerBrandingLogo'></span><div id='footerAppContainer'</div></div></div></div>",initialize:function(){$("body").append(Footer.displayUI),$(".footerBrandingLogo").click(function(){var e=Navigation.findNavigationEntry("institutionHomePage");e&&e instanceof NavigationEntryValueObject&&Navigation.navigate(e,null)})},add:function(e){if(e instanceof FooterApplicationValueObject){var n="<li><span id='"+e.appid+"' class='"+e.className+"'></span></li>",t=$("<div id='"+e.appid+this.uiMarker+"'></div>");t.append(e.displayUI),$("#footerIconContainer").append(n),$("#footerContainer").append(t),this.apps.push(e)}},remove:function(e){for(var n=0;n<this.apps.length;n++)this.apps[n].appid==e&&($("#"+this.apps[n].appid).parent().remove(),$("#"+this.apps[n].appid+this.uiMarker).remove())},createContainer:function(e){if(e instanceof footerAppDiv){for(i=0;i<Footer.appContainers.length;i++)Footer.appContainers[i].appId==e.appId&&$("#footerAppContainer").find("#"+e.appId).remove();var n=$("<div id='"+e.appId+"'></div>");$("#footerAppContainer").children().length;-1!=e.index&&null!=e.index&&e.index<=$("#footerAppContainer").children().length?0<$("#footerAppContainer").children().length?0!=e.index?$("#footerAppContainer").find("div:eq("+(e.index-1)+")").after(n):0==e.index&&$("#footerAppContainer").find("div:eq("+e.index+")").before(n):0==e.index&&$("#footerAppContainer").append(n):$("#footerAppContainer").append(n),$("#footer").find("#"+e.appId).html(e.html),this.appContainers.push(e)}return e},getAppContainer:function(e){var n,t=$("#footerAppContainer").children().size(),o="false";for(i=0;i<Footer.appContainers.length;i++)if(Footer.appContainers[i].appId==e){o="true",n=Footer.appContainers[i];break}return"true"==o?n:Footer.createContainer(new footerAppDiv(t,e,""))}},ScrollableList={initialized:!1,speed:5,height:110,interval:null,selectedList:null,marker:"___",totalColumns:2,numColumns:0,initialize:function(){this.add(ScrollableList.totalColumns),$(".navList > .scrollableListFolder").live("click",function(){ScrollableList.load($(this))});var e=Navigation.menuList;for(var n in e)"none"!=n&&(e[n]instanceof Array?$(".navList:first").append("<li id='"+ScrollableList.marker+n+"'  class='parent scrollableListFolder'><span>"+n+"</span></li>"):$(".navList:first").append("<li class='scrollableListItem'><span>"+e[n]+"</span></li>"));ScrollableList.refresh(),$(".downButton").live("mouseover",function(){ScrollableList.selectedList=$(this).parent(),ScrollableList.interval=setInterval(ScrollableList.scrolldown,50)}),$(".downButton").live("mouseout",function(){clearInterval(ScrollableList.interval)}),$(".upButton").live("mouseover",function(){ScrollableList.selectedList=$(this).parent(),ScrollableList.interval=setInterval(ScrollableList.scrollup,50)}),$(".upButton").live("mouseout",function(){clearInterval(ScrollableList.interval)}),$(window).resize(function(){}),ScrollableList.attachScrollButtonHandlers()},reinitialize:function(e){$(".navList > .scrollableListFolder").live("click",function(){ScrollableList.load($(this))});var n=Navigation.menuList;for(var t in n){if("none"!=t)if(1==e)$(".navList:first").append("<li id='"+ScrollableList.marker+t+"'  class='parent scrollableListFolder'><span>"+t+"</span></li>");else $("#"+("list_"+t)).remove(),$(".selectedListItem").removeClass("selectedListItem"),$(".navList:first").append("<li id='"+ScrollableList.marker+t+"'  class='parent scrollableListFolder'><span>"+t+"</span></li>")}ScrollableList.refresh(),$(".downButton").live("mouseover",function(){ScrollableList.selectedList=$(this).parent(),ScrollableList.interval=setInterval(ScrollableList.scrolldown,50)}),$(".downButton").live("mouseout",function(){clearInterval(ScrollableList.interval)}),$(".upButton").live("mouseover",function(){ScrollableList.selectedList=$(this).parent(),ScrollableList.interval=setInterval(ScrollableList.scrollup,50)}),$(".upButton").live("mouseout",function(){clearInterval(ScrollableList.interval)}),$(window).resize(function(){}),ScrollableList.attachScrollButtonHandlers()},add:function(e){(!e||e<=0)&&(e=1);for(var n=0;n<e;n++)0==n?($("#scrollableListContainer").append("<div class='columns header'><div class='scrollContainer'><ul class='navList navListStart'></ul></div></div>"),$("#scrollableListContainer").append("<div id='btn-l' class='btn-l'/>"),$("#scrollableListContainer").append("<div id='columnsContainer'><div id='columnsContainerTrack'/></div>"),$("#scrollableListContainer").append("<div id='btn-r' class='btn-r'/>")):ScrollableList.addColumn()},addColumn:function(){$("#columnsContainerTrack").append("<div class='columns'><span class='scrollUpButton'></span><div class='scrollContainer'><ul class='navList'></ul></div><span class='scrollDownButton'></span></div>"),ScrollableList.numColumns++;var e=$("#columnsContainerTrack").find(".columns:first").width();$("#columnsContainerTrack").css("width",ScrollableList.numColumns*e+ScrollableList.numColumns+"px"),ScrollableList.setScrollButtonStates()},removeColumn:function(e){$("#columnsContainerTrack").find(".columns:last").remove(),ScrollableList.numColumns--;var n=$("#columnsContainerTrack").find(".columns:first").width();$("#columnsContainerTrack").css("width",ScrollableList.numColumns*n+ScrollableList.numColumns+"px")},load:function(e){var n=e.attr("id").replace(ScrollableList.marker,"").split("___");e.parent().parent().parent().nextAll().find(".navList").each(function(e){ScrollableList.removeColumn()}),ScrollableList.addColumn();var t=null;(t=e.parent().hasClass("navListStart")?e.parent().parent().parent().next().next().find(".navList:first"):e.parent().parent().parent().next().find(".navList")).css("top","0"),e.parent().find("li").removeClass("selectedListItem"),e.addClass("selectedListItem");for(var o=Navigation.menuList,i=0;i<n.length;i++)o[n[i]]&&o[n[i]]instanceof Array&&(o=o[n[i]]);for(var i in o){var r=decodeURI(e.attr("id")+"___"+i);if(o[i]instanceof Array)t.append("<li id='"+r+"' class='parent scrollableListFolder'><span>"+i+"</span></li>");else if(o[i]instanceof NavigationEntryValueObject){var a=o[i].name.replace("&lsquo;","").replace(/-/gi," ccccc ").replace("&quot;","").replace(/[^(a-z_)/ \u00D1\u00F10-9]/gi,"").replace(/ ccccc /gi,"-");t.append("<li class='scrollableListItem' onclick=\"toggleBrowseMenu();Navigation.navigate('"+a+"','"+o[i].path+"');\"><span>"+o[i].caption+"</span></li>")}else ErrorManager.show("Unknown entry encountered.")}ScrollableList.refresh()},refresh:function(){$(".navList").each(function(e){var n,t;$(this).height()>ScrollableList.height?((n=$(this).parent().parent().find(".scrollUpButton")).hasClass("upButton")||(n.removeClass("upButtonDisabled"),n.addClass("upButton"),n.append("<span class='navUpArrow'></span>")),(t=$(this).parent().parent().find(".scrollDownButton")).hasClass("downButton")||(t.removeClass("downButtonDisabled"),t.addClass("downButton"),t.append("<span class='navDownArrow'></span>"))):((n=$(this).parent().parent().find(".scrollUpButton")).removeClass("upButton"),n.addClass("upButtonDisabled"),n.empty(),(t=$(this).parent().parent().find(".scrollDownButton")).removeClass("downButton"),t.addClass("downButtonDisabled"),t.empty())})},scrollup:function(){if(ScrollableList.selectedList){var e=ScrollableList.selectedList.find(".navList").prop("offsetTop"),n=e<0?e+ScrollableList.speed:e;ScrollableList.selectedList.find(".navList").css("top",n+"px")}},scrolldown:function(){if(ScrollableList.selectedList){var e=ScrollableList.selectedList.find(".navList").prop("offsetHeight"),n=ScrollableList.selectedList.find(".navList").prop("offsetTop"),t=e+n>ScrollableList.height?n-ScrollableList.speed:n;ScrollableList.selectedList.find(".navList").css("top",t+"px")}},attachScrollButtonHandlers:function(){var e=$("#columnsContainerTrack").find(".columns:first").css("width"),n=!1;function t(){n=!1}$("#btn-l").css("display","none"),$("#btn-r").css("display","none"),$("#btn-r").live("mouseover",function(){$(this).css({"border-color":"#369","background-position":"-52px center"})}),$("#btn-r").live("mouseout",function(){$(this).css({"border-color":"#666","background-position":"-18px center"})}),$("#btn-r").live("click",function(){n||(n=!0,$("#columnsContainerTrack").animate({marginLeft:"-="+e},500,function(){ScrollableList.setScrollButtonStates(),setTimeout(t,250)}))}),$("#btn-l").live("mouseover",function(){$(this).css({"border-color":"#369","background-position":"-36px center"})}),$("#btn-l").live("mouseout",function(){$(this).css({"border-color":"#666","background-position":"-1px center"})}),$("#btn-l").live("click",function(){n||(n=!0,$("#columnsContainerTrack").animate({marginLeft:"+="+e},500,function(){ScrollableList.setScrollButtonStates(),setTimeout(t,250)}))}),$("#btn-r, #btn-l").live("mousedown",function(){$(this).css({"border-color":"#036"})}),$("#btn-r, #btn-l").live("mouseup",function(){$(this).css({"border-color":"#369"})})},setColumnContainerWidth:function(){},slideDownScrollButtons:function(){$("#btn-l").hasClass("visible")&&$("#btn-l").slideDown(),$("#btn-r").hasClass("visible")&&$("#btn-r").slideDown()},slideUpScrollButtons:function(){$("#btn-l").hasClass("visible")&&$("#btn-l").slideUp(),$("#btn-r").hasClass("visible")&&$("#btn-r").slideUp()},setScrollButtonStates:function(){var e=$("#columnsContainerTrack").find(".columns:first").width(),n=$("#columnsContainerTrack").css("margin-left");0==(n="auto"==n?0:parseInt(n))?($("#btn-l").fadeOut(250),$("#btn-l").removeClass("visible")):($("#btn-l").fadeIn(250),$("#btn-l").addClass("visible")),ScrollableList.numColumns*e+n<=$("#columnsContainer").width()?($("#btn-r").fadeOut(250),$("#btn-r").removeClass("visible")):($("#btn-r").fadeIn(250),$("#btn-r").addClass("visible"))}},StopWatch={startTime:null,start:function(){startTime=(new Date).getTime()},stop:function(){ErrorManager.show("elapsed: "+((new Date).getTime()-startTime)+" ms")}};function ColorPickerComponent(e,n,t,o,i,r){var a=$("<div class='colorPickerComponent'><span class='colorpickerlabel "+n+"'>"+t+"</span><div id='"+e+"' class='colorPickerControl'><div style='background-color: "+o+"'></div></div><span class='colorPickerReset'>"+ResourceManager.getString("common_reset")+"</span></div>");return a.find(".colorPickerReset").click(r),a.find("#"+e).ColorPicker({color:o,onShow:function(e){return $(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onChange:function(e,n,t){i(n),Theme.currentThemeName="custom",$("#changeTheme").val("custom"),MessageProcessor.broadcast(wrapMessage(createStyleMessage()))}}),a}var Preferences={show:function(){var e=$("<div id='prefWindowContent'><span class='prefLang'>"+ResourceManager.getString("preferences_language")+":</span> <select id='changeLocale'><option value='en'>English</option><option value='es'>Espa&ntilde;ol</option><option value='fr'>Fran&ccedil;ais</option><option value='ar'>Arabic</option><option value='xx'>Default</option></select><br><br><span class='prefTheme'>"+ResourceManager.getString("preferences_theme")+":</span> <select id='changeTheme'></select><br><br><div class='colorPickerContainer'></div></div>"),n=e.find(".colorPickerContainer");n.append(ColorPickerComponent("primaryColorSelector","primary",ResourceManager.getString("preferences_color_primary"),Theme.custom.colors.primary,Theme.setPrimaryColor,Theme.resetPrimaryColor)),n.append(ColorPickerComponent("secondaryColorSelector","secondary",ResourceManager.getString("preferences_color_secondary"),Theme.custom.colors.secondary,Theme.setSecondaryColor,Theme.resetSecondaryColor)),n.append(ColorPickerComponent("interactionColorSelector","interaction",ResourceManager.getString("preferences_color_interaction"),Theme.custom.colors.interaction,Theme.setInteractionColor,Theme.resetInteractionColor)),n.append(ColorPickerComponent("selectionColorSelector","selection",ResourceManager.getString("preferences_color_selection"),Theme.custom.colors.selection,Theme.setSelectionColor,Theme.resetSelectionColor)),n.append(ColorPickerComponent("primaryTextColorSelector","text",ResourceManager.getString("preferences_text"),Theme.custom.text.primary.color,Theme.setTextPrimaryColor,Theme.resetTextPrimaryColor)),n.append(ColorPickerComponent("secondaryTextColorSelector","text",ResourceManager.getString("preferences_text"),Theme.custom.text.secondary.color,Theme.setTextSecondaryColor,Theme.resetTextSecondaryColor)),EventDispatcher.addEventListener(Localization.events.localeChange,function(){e.find(".prefLang").text(ResourceManager.getString("preferences_language")+":"),e.find(".prefTheme").text(ResourceManager.getString("preferences_theme")+":"),e.find(".colorpickerlabel.primary").text(ResourceManager.getString("preferences_color_primary")),e.find(".colorpickerlabel.secondary").text(ResourceManager.getString("preferences_color_secondary")),e.find(".colorpickerlabel.interaction").text(ResourceManager.getString("preferences_color_interaction")),e.find(".colorpickerlabel.selection").text(ResourceManager.getString("preferences_color_selection")),e.find(".colorPickerReset").text(ResourceManager.getString("common_reset"))});var t=CookieManager.get("theme");for(var o in t=t||Theme.defaultTheme,e.find("#changeTheme").append("<option value='custom'>custom</option>"),Theme.themes)e.find("#changeTheme").append("<option value='"+o+"' "+(t==o?"selected":"")+">"+o+"</option>");CommonContext.locale&&e.find("#changeLocale").val(CommonContext.locale),e.find("#changeTheme").change(function(){"none"!=$(this).val()&&Theme.setTheme($(this).val())}),e.find("#changeLocale").change(function(){ResourceManager.setLocale($(this).val())}),$("#prefWindowCloseButton").click(function(){Theme.save(),ModalWindowFactory.close()});var i=[Button("saveTabCreationButton","common_save",Preferences.save)];ModalWindowFactory.show("prefWindowModal","preferences_label_title","",e,"",i,ModalWindowFactory.close)},save:function(){Theme.save(),CookieManager.set("locale",$("#changeLocale").val()),ModalWindowFactory.close()}};